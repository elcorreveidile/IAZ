<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IA de la A a la Z · CLM Granada</title>
  <style>
    :root {
      --bg: #0f172a;      /* azul noche */
      --fg: #f8fafc;      /* blanco roto */
      --accent: #38bdf8;  /* azul claro */
      --muted: #94a3b8;   /* gris */
      --panel: #0b1224;
      --panel2: #020617;
      --border: #1e293b;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--fg);
      display: flex;
      min-height: 100vh;
    }

    aside {
      width: 90px;
      background: var(--panel2);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem 0;
      gap: 0.4rem;
      overflow-y: auto;
      border-right: 1px solid var(--border);
    }

    aside button {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 0.9rem;
      cursor: pointer;
      padding: 0.35rem;
      width: 100%;
    }

    aside button.active {
      color: var(--accent);
      font-weight: 700;
    }

    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .topbar {
      position: fixed;
      top: 0;
      left: 110px;
      right: 0;
      display: flex;
      flex-direction: column;
      gap: .6rem;
      z-index: 5;
    }

    .topbar .banner {
      width: 100%;
      background: var(--panel2);
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: .6rem 1rem;
    }

    .topbar .banner img {
      max-width: 100%;
      height: 72px;
      object-fit: contain;
    }

    .topbar .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      padding: 0 1.5rem;
    }

    .pill {
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--fg);
      padding: .45rem .7rem;
      border-radius: 999px;
      cursor: pointer;
    }

    .pill.active {
      border-color: var(--accent);
      color: var(--accent);
      font-weight: 700;
    }

    .slide {
      max-width: 900px;
      text-align: center;
      animation: fade 0.25s ease-in-out;
    }

    .letter {
      font-size: 6rem;
      font-weight: 900;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .title {
      font-size: 1.6rem;
      margin-bottom: 1.5rem;
      color: var(--muted);
    }

    .quote {
      font-size: 2.2rem;
      line-height: 1.25;
      font-weight: 520;
    }

    .hint {
      margin-top: 1.6rem;
      color: var(--muted);
      font-size: .9rem;
    }

    footer {
      position: fixed;
      bottom: 1rem;
      right: 1.5rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    @keyframes fade {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 700px) {
      .letter { font-size: 4rem; }
      .quote { font-size: 1.5rem; }
      aside { width: 60px; }
      .topbar { left: 80px; }
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(2, 6, 23, .72);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1.2rem;
      z-index: 50;
    }

    .modal {
      width: 100%;
      max-width: 720px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
      overflow: hidden;
    }

    .modal header {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
      padding: .9rem 1rem;
      border-bottom: 1px solid var(--border);
    }

    .modal header strong {
      letter-spacing: .01em;
    }

    .modal header button {
      background: none;
      border: 1px solid var(--border);
      color: var(--fg);
      padding: .35rem .6rem;
      border-radius: 999px;
      cursor: pointer;
    }

    .modal pre {
      margin: 0;
      padding: 1rem;
      background: var(--panel2);
      overflow: auto;
      color: var(--fg);
      font-size: .95rem;
      line-height: 1.35;
      white-space: pre-wrap;
    }

    /* Taller cards */
    .workshop {
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      padding-top: 3.5rem;
      text-align: left;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 1.2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    .card h2 {
      margin: .1rem 0 .4rem;
      font-size: 1.1rem;
    }

    .card p {
      margin: 0 0 1rem;
      color: var(--muted);
      line-height: 1.4;
    }

    .card .row {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: flex-start;
    }

    .card pre {
      margin: 0;
      background: var(--panel2);
      border: 1px solid var(--border);
      padding: 1rem;
      border-radius: 14px;
      overflow: auto;
      color: var(--fg);
      font-size: .92rem;
      line-height: 1.35;
      white-space: pre-wrap;
    }

    .note {
      margin-top: .9rem;
      padding: .8rem 1rem;
      border-left: 3px solid var(--accent);
      color: var(--muted);
      background: rgba(56,189,248,.06);
      border-radius: 12px;
    }

    .danger {
      background: #7c2d12;
      border: 1px solid #fb923c;
      color: #fff;
      padding: .5rem .9rem;
      border-radius: 999px;
      cursor: pointer;
    }

    .success {
      background: #064e3b;
      border: 1px solid #34d399;
      color: #ecfeff;
      padding: .5rem .9rem;
      border-radius: 999px;
      cursor: pointer;
    }

    .error-banner {
      position: fixed;
      left: 110px;
      right: 1.5rem;
      bottom: 3.2rem;
      background: rgba(124, 45, 18, .9);
      border: 1px solid #fb923c;
      color: #fff;
      padding: .8rem 1rem;
      border-radius: 14px;
      display: none;
      z-index: 60;
    }
  </style>
</head>
<body>

  <!-- Portada -->
  <div id="cover" style="position:fixed; inset:0; background:linear-gradient(160deg,#020617,#0f172a); display:flex; align-items:center; justify-content:center; z-index:100;">
    <div style="max-width:900px; padding:2rem; text-align:center;">
      <img src="clm-rojo.png" alt="Centro de Lenguas Modernas · Universidad de Granada" style="max-width:420px; width:90%; margin:0 auto 2rem; display:block;" />
      <h1 style="font-size:2.8rem; margin:0 0 .6rem;">La IA de la A a la Z</h1>
      <p style="margin:0 0 2.2rem; font-size:1.2rem; color:var(--muted);">Javier Benítez Láinez</p>
      <button id="enterBtn" class="pill" style="font-size:1rem; padding:.6rem 1.4rem;">Entrar</button>
    </div>
  </div>

  <aside id="nav" aria-label="Navegación A-Z"></aside>

  <main>
    <div class="topbar">
      <div class="banner">
        <img src="banner.PNG" alt="Centro de Lenguas Modernas · Universidad de Granada" />
      </div>
      <div class="controls">
        <div style="display:flex; gap:.5rem; align-items:center; flex-wrap:wrap;">
          <strong style="letter-spacing:.02em;">IA de la A a la Z</strong>
          <span style="color:var(--muted);">· CLM Granada</span>
        </div>
        <div style="display:flex; gap:.5rem; align-items:center;">
          <button id="modeDeck" class="pill">Presentación</button>
          <button id="modeWorkshop" class="pill">Taller</button>
        </div>
      </div>
    </div>

    <div id="content" style="width:100%; max-width:980px; margin:0 auto; padding-top:3.5rem;"></div>
  </main>

  <footer>IA de la A a la Z · CLM Granada</footer>

  <div id="errorBanner" class="error-banner"></div>

  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <header>
        <strong id="modalTitle">Ejemplo</strong>
        <button id="modalClose" aria-label="Cerrar">Cerrar</button>
      </header>
      <pre id="modalBody"></pre>
    </div>
  </div>

<script>
// =====================
// Datos (A-Z)
// =====================
const data = [
  // En todas las letras (salvo S) hay 2 botones con foco distinto (no “slop/valor”).
  // S se mantiene como caso especial con su mensaje y botones “slop/valor”.

  {l:'A', t:'Algoritmo · Anthropic', q:'La IA no piensa: ejecuta algoritmos con apariencia de pensamiento.',
    btn1Label:'Agotamiento', btn1Title:'A · Agotamiento algorítmico', btn1:`Cuando un modelo “optimiza” demasiado lo probable, tiende a:\n- repetir fórmulas\n- aplanar estilo\n- volverse predecible\n\nEn aula: si lo dejas “solo”, te llena de plantillas.\nTu filtro: contexto real + objetivo comunicativo + producto final.`,
    btn2Label:'Competencia', btn2Title:'A · Anthropic frente a GPT', btn2:`Idea clave:\n- Competencia no es “quién escribe más bonito”.\n- Es: control, seguridad, consistencia, herramientas y coste.\n\nEn docencia: si una IA te da salidas más consistentes con tus reglas (nivel, registro, restricciones), te ahorra revisión.\n(Comparar siempre con una tarea idéntica y tu rúbrica.)`},

  {l:'B', t:'Bias (sesgo)', q:'La IA no es neutral: reproduce los prejuicios de los textos que ha leído.',
    btn1Label:'Trampa', btn1Title:'B · Sesgo (donde te la juega)', btn1:`El sesgo aparece sobre todo en:\n- personajes (género, clase, origen)\n- “situaciones típicas” (clichés culturales)\n- roles profesionales\n\nEn ELE: el material puede reforzar estereotipos sin que te enteres.\nSolución: pedir 3 perspectivas + revisar representación.`,
    btn2Label:'Uso crítico', btn2Title:'B · Convertir sesgo en tarea', btn2:`Actividad relámpago (C1):\n1) Pide 3 descripciones de la misma persona desde puntos de vista distintos.\n2) Subraya estereotipos y “marcadores” (léxico, adjetivos, presuposiciones).\n3) Reescritura + debate: “¿qué cambia si cambio el narrador?”`},

  {l:'C', t:'Corpus', q:'La IA escribe bien porque ha leído mucho, no porque entienda.',
    btn1Label:'Cliché', btn1Title:'C · Corpus sin vida', btn1:`Si pides “un texto sobre X”, el corpus tira de:\n- turismo\n- tópicos\n- frases prefabricadas\n\nResultado: texto intercambiable.\nEn clase: mata el interés y la conversación.`,
    btn2Label:'Lengua viva', btn2Title:'C · Corpus como mina', btn2:`B1/B2:\nPrompt: “Dame 8 microtextos tipo WhatsApp sobre problemas reales de piso en Granada (fianza, humedad, ruido). Incluye intención (queja/pedir ayuda/negociar) y registro.”\n\nLuego: ordenar por cortesía + role-play.`},

  {l:'D', t:'Datos', q:'Lo que no está en los datos, para la IA no existe.',
    btn1Label:'Alucinación', btn1Title:'D · El peligro del dato inventado', btn1:`En trámites locales, horarios, teléfonos, precios, “lo de hoy”…\nla IA puede inventar con tranquilidad.\n\nRegla: si es verificable, se verifica. Si no, se formula como hipótesis.`,
    btn2Label:'Verificación', btn2Title:'D · IA como guía para comprobar', btn2:`Prompt útil:\n“Si no estás segura, dilo. Dime cómo verificarlo: qué web, qué palabras clave, qué oficina. Luego crea 5 frases para llamar y confirmar.”\n\nEsto sí enseña competencia real.`},

  {l:'E', t:'Evaluación', q:'La IA puede corregir, pero no puede juzgar.',
    btn1Label:'Límite', btn1Title:'E · Lo que NO delego', btn1:`No delegues:\n- la nota\n- la intención comunicativa\n- la adecuación al grupo real\n\nPorque eso depende de contexto, objetivos y relación con el alumno.`,
    btn2Label:'Atajo bueno', btn2Title:'E · Feedback formativo rápido', btn2:`Prompt:\n“Da feedback formativo (no nota) sobre cohesión, adecuación de registro y errores recurrentes. Termina con 3 objetivos de mejora y una mini-tarea para la próxima versión.”\n\nIA = sugerencias. Profesor = decisión.`},

  {l:'F', t:'Fine-tuning', q:'Personalizar la IA es enseñarle tu manera de enseñar.',
    btn1Label:'Falso tuning', btn1Title:'F · Personalizar sin tocar el modelo', btn1:`No hace falta “entrenar” de verdad.\nBasta con:\n- 2 tareas modelo tuyas\n- tu rúbrica\n- tus restricciones\n\nEso fuerza consistencia metodológica.`,
    btn2Label:'Plantilla', btn2Title:'F · Prompt de consistencia CLM', btn2:`“Aquí tienes 2 tareas modelo + mi rúbrica. Crea una tercera tarea NUEVA que respete exactamente: contexto real, producto final, interacción y criterios evaluables. No generes fichas: estructura y decisiones.”`},

  {l:'G', t:'Gemini · GitHub', q:'La IA se integra en los sistemas; GitHub nos recuerda que enseñar también es construir y compartir conocimiento.',
    btn1Label:'Sistema', btn1Title:'G · IA integrada (lo invisible)', btn1:`La IA se está metiendo en:\n- correo, docs, búsqueda\n- plataformas educativas\n- herramientas de presentación\n\nRiesgo: usarla sin criterio porque “ya viene”.`,
    btn2Label:'Control', btn2Title:'G · GitHub como memoria docente', btn2:`Idea:\n- Guardar “plantilla de sesión” + rúbricas + prompts como repo.\n- Versionar por grupos/años.\n\nResultado: reproducibilidad, coherencia y mejora continua (como equipo).`},

  {l:'H', t:'Hallucinations', q:'La IA se equivoca con seguridad absoluta.',
    btn1Label:'Síntoma', btn1Title:'H · Señales de alucinación', btn1:`Ojo cuando:\n- cita datos exactos sin fuente\n- suena demasiado redondo\n- “rellena” huecos sin admitir duda\n\nEn clase: enseña a detectar seguridad falsa.`,
    btn2Label:'Antídoto', btn2Title:'H · Prompt antialucinación', btn2:`“Responde en 2 capas: (1) alta confianza, (2) dudoso. Si es dudoso, di cómo verificarlo. No inventes.”`},

  {l:'I', t:'Inteligencia', q:'La llamada “inteligencia artificial” es estadística muy sofisticada.',
    btn1Label:'Mito', btn1Title:'I · Lo que la IA no hace', btn1:`No “entiende”, no “quiere”, no “interpreta intenciones”.\nPredice texto probable.\n\nSi le pides psicología del alumno, te inventa una película.`,
    btn2Label:'Uso real', btn2Title:'I · Lo que sí hace bien', btn2:`Describir opciones lingüísticas:\n- alternativas de conectores\n- matices pragmáticos\n- reformulaciones por registro\n\nSiempre con ejemplos y contexto.`},

  {l:'J', t:'Juicio', q:'El juicio crítico sigue siendo exclusivamente humano.',
    btn1Label:'No delegar', btn1Title:'J · La decisión es tuya', btn1:`La IA puede proponer.\nTú decides por:\n- energía del grupo\n- objetivos del curso\n- momento de la secuencia\n- historia del aula\n\nEso no está en el prompt.`,
    btn2Label:'Criterios', btn2Title:'J · Pedir criterios, no veredictos', btn2:`Prompt:\n“Propón 3 secuencias y explica pros/contras para: grupo cansado, activo y tímido. No elijas: dame criterios para elegir yo.”`},

  {l:'K', t:'Know-how', q:'Saber usar IA no es saber enseñar con IA.',
    btn1Label:'Señal', btn1Title:'K · Señal de “promptismo”', btn1:`Si la actividad no responde:\n- qué objetivo comunicativo\n- qué producto final\n- cómo evalúo\n\n… entonces es decoración, no enseñanza.`,
    btn2Label:'Conversión', btn2Title:'K · Convertir “divertido” en aprendizaje', btn2:`Prompt:\n“Diseña una actividad breve ‘divertida’, pero con objetivo comunicativo claro, producto final y criterio observable de éxito.”`},

  {l:'L', t:'Lengua viva', q:'La IA domina el uso, pero no la intención.',
    btn1Label:'Lista muerta', btn1Title:'L · Frases sin situación', btn1:`Listas de frases = lengua sin vida.\nNo hay intención, fricción, relación.\n\nEn ELE, eso no se transfiere al uso real.`,
    btn2Label:'Role-play', btn2Title:'L · Registro + situación', btn2:`Prompt:\n“Dame 6 formas de pedir en un bar ordenadas por cortesía + una situación para cada una (prisa, confianza, queja, malentendido).”`},

  {l:'M', t:'Modelo', q:'Los modelos cambian; el criterio docente no.',
    btn1Label:'Volatilidad', btn1Title:'M · Hoy sirve, mañana cambia', btn1:`Lo que hoy “funciona” puede cambiar por:\n- versión del modelo\n- parámetros\n- políticas\n\nPor eso tu método no puede depender de una herramienta.`,
    btn2Label:'Comparar', btn2Title:'M · Test A/B rápido', btn2:`Ejercicio:\n- Misma consigna en 2 IAs.\n- Comparar: nivel, clichés, errores, tono.\n- Elegir por coherencia con tu rúbrica.`},

  {l:'N', t:'Nivel', q:'La IA no entiende el MCER: lo imita.',
    btn1Label:'Genérico', btn1Title:'N · “B1” sin alumnos', btn1:`Sin muestras reales del grupo, la IA produce un B1 estándar.\nPuede ser:\n- demasiado fácil\n- o demasiado “académico”.`,
    btn2Label:'Ajuste fino', btn2Title:'N · B1 real con evidencias', btn2:`Prompt:\n“Aquí tienes 2 textos reales de mi grupo. Adapta la tarea al nivel de ESTE grupo: vocabulario, longitud, apoyos, ritmo.”`},

  {l:'O', t:'OpenAI', q:'Cuando todos pueden generar contenido, el valor está en saber elegir.',
    btn1Label:'Inflación', btn1Title:'O · Mucho no es mejor', btn1:`La IA te puede dar 50 variantes.\nEso no es productividad: es ruido.\n\nEl valor está en seleccionar y ajustar con criterio.`,
    btn2Label:'Editor', btn2Title:'O · Profesor como curador', btn2:`Prompt:\n“Genera 10 opciones y selecciona 3 justificando por qué sirven para este grupo y este objetivo. Señala riesgos de cliché.”`},

  {l:'P', t:'Prompt', q:'Un buen prompt no sustituye a un buen método.',
    btn1Label:'Error típico', btn1Title:'P · El prompt como varita mágica', btn1:`Si el método no existe, el prompt solo acelera el caos.\nEl prompt no crea objetivos: los traduce.`,
    btn2Label:'Plantilla', btn2Title:'P · Prompt con método', btn2:`Contexto + objetivo + producto + restricciones + evaluación.\nPide estructura y decisiones, no “fichas”.`},

  {l:'Q', t:'Quality control', q:'La IA produce mucho; el profesor decide qué vale.',
    btn1Label:'Riesgo', btn1Title:'Q · Señales de relleno', btn1:`Relleno cuando:\n- repite fórmulas\n- propone “debate” sin preguntas\n- pone ejercicios sin producto\n\nRegla: si no se evalúa, sobra.`,
    btn2Label:'Filtro', btn2Title:'Q · Prompt de control de calidad', btn2:`“Propón 6 actividades y marca con ⚠️ las que sean cliché/relleno. Explica cómo convertir una mala en buena.”`},

  {l:'R', t:'Rol docente', q:'El profesor ya no es transmisor: es diseñador de experiencias.',
    btn1Label:'Antes', btn1Title:'R · Aula manual', btn1:`Explicar reglas no crea uso.\nSin escena, sin necesidad comunicativa, la gramática no se activa.`,
    btn2Label:'Ahora', btn2Title:'R · Diseñar escena', btn2:`Prompt:\n“Diseña una situación real en Granada donde NECESITEN el indefinido. Incluye: objetivo, roles, fricción, producto final y evaluación.”`},

  // S se mantiene tal cual (caso especial)
  {l:'S', t:'Sistema · Slop', q:'El slop es contaminación: contenido basura generado en masa. No seas quien lo produce; sé quien genera valor humano.',
    badTitle:'S · Slop', bad:`Ejemplo de SLOP (baja calidad):\n\n"Crea 10 actividades divertidas para practicar el pasado en nivel B1."\n\nProblemas:\n- No hay contexto real.\n- No hay objetivo comunicativo.\n- No hay producto final.\n- Genera ejercicios intercambiables y olvidables.`,
    goodTitle:'S · Valor', good:`Ejemplo con VALOR HUMANO:\n\n"Diseña una secuencia de 2 actividades para un grupo B1 en Granada que acaba de llegar a la ciudad.\nObjetivo: contar experiencias recientes para integrarse socialmente.\nCondiciones:\n- Situación real (primeros días en la ciudad).\n- Producto final: breve relato oral compartido en grupo.\n- Incluye criterios claros de evaluación (fluidez, adecuación, interacción)."`},

  {l:'T', t:'Token', q:'La IA no ve palabras: ve fragmentos.',
    btn1Label:'Por qué falla', btn1Title:'T · Token ≠ palabra', btn1:`Por eso:\n- se pasa del límite\n- cambia el recuento\n- “no clava” números\n\nNo es mala fe: es la unidad de cálculo.`,
    btn2Label:'Solución', btn2Title:'T · Control práctico', btn2:`Prompt:\n“Escribe máx. 110 palabras. Luego añade un recuento aproximado y sugiere qué recortar si me paso.”`},

  {l:'U', t:'Uso responsable', q:'Prohibir la IA es renunciar a educar en su uso.',
    btn1Label:'Peligro', btn1Title:'U · Suplantación', btn1:`Si el alumno entrega “tal cual”, no aprende.\nY tú pierdes evaluación real.\n\nLa norma de aula debe ser explícita.`,
    btn2Label:'Acuerdo', btn2Title:'U · Reglas claras', btn2:`Prompt:\n“Genera 10 reglas (permitido/prohibido) y 3 ejemplos de uso correcto vs incorrecto, con consecuencias pedagógicas.”`},

  {l:'V', t:'Velocidad', q:'La IA ahorra tiempo solo si sabes para qué usarlo.',
    btn1Label:'Trampa', btn1Title:'V · Producir por producir', btn1:`La velocidad puede usarse para:\n- más PDFs\n- más ejercicios\n- más ruido\n\nEso no mejora el aula.`,
    btn2Label:'Palanca', btn2Title:'V · Ganar tiempo humano', btn2:`Usa la IA para generar variantes.\nUsa tu tiempo en:\n- feedback individual\n- conversación real\n- seguimiento\n\nLa velocidad debe humanizar.`},

  {l:'W', t:'Web', q:'Un curso vivo no cabe en un PDF.',
    btn1Label:'Documento muerto', btn1Title:'W · El PDF no respira', btn1:`El PDF fija el curso.\nPero el grupo cambia cada semana.\n\nLa web permite iterar y personalizar.`,
    btn2Label:'Entorno', btn2Title:'W · Página del grupo', btn2:`Estructura:\n- objetivos\n- calendario\n- tareas\n- rúbricas\n- recursos\n- “lo de hoy”\n\nEditable por sesión: curso vivo.`},

  {l:'X', t:'Xenial / Extraño', q:'La creatividad de la IA empieza donde el profesor se atreve a experimentar.',
    btn1Label:'Genérico', btn1Title:'X · “Creativo” sin foco', btn1:`Si pides “ideas creativas”, salen listas blandas.\nLa creatividad útil necesita fricción y objetivo.`,
    btn2Label:'Provocar', btn2Title:'X · Ideas raras pero viables', btn2:`Prompt:\n“Dame 5 ideas raras pero viables para provocar interacción oral en B2 sobre vivienda y convivencia. Cada idea con objetivo y producto final.”`},

  {l:'Y', t:'You (el profesor)', q:'Sin profesor, la IA no enseña nada.',
    btn1Label:'Lo que falta', btn1Title:'Y · La IA no gestiona el aula', btn1:`No hace:\n- mirada\n- ritmo\n- escucha\n- humor\n- contención\n\nEl aula es relación.`,
    btn2Label:'Intervenciones', btn2Title:'Y · Frases del profesor', btn2:`Prompt:\n“Dame 6 intervenciones del profesor para sostener interacción (reformular, ampliar, devolver pregunta, ritmo) con frases modelo.”`},

  {l:'Z', t:'Z.ai', q:'Las herramientas se multiplican; el pensamiento pedagógico no se delega.',
    btn1Label:'Tentación', btn1Title:'Z · Diapositivas bonitas', btn1:`Si la herramienta manda, la clase se vuelve diseño.\nBonito ≠ útil.\n\nPrimero método, luego slides.`,
    btn2Label:'Taller', btn2Title:'Z · Slides con intención', btn2:`Prompt:\n“Convierte esta secuencia en 8 diapositivas. Cada una: objetivo comunicativo, 2 frases modelo, micro-tarea oral y criterio de éxito.”`},
];

// =====================
// DOM
// =====================
const cover = document.getElementById('cover');
const enterBtn = document.getElementById('enterBtn');
const nav = document.getElementById('nav');
const content = document.getElementById('content');
const modeDeckBtn = document.getElementById('modeDeck');
const modeWorkshopBtn = document.getElementById('modeWorkshop');

const modalBackdrop = document.getElementById('modalBackdrop');
const modalTitle = document.getElementById('modalTitle');
const modalBody = document.getElementById('modalBody');
const modalClose = document.getElementById('modalClose');

const errorBanner = document.getElementById('errorBanner');

let current = 0;
let mode = 'deck'; // 'deck' | 'workshop'

// =====================
// Utilidades
// =====================
function showError(msg) {
  errorBanner.style.display = 'block';
  errorBanner.textContent = msg;
}

function clearError() {
  errorBanner.style.display = 'none';
  errorBanner.textContent = '';
}

function setActiveModeButtons() {
  modeDeckBtn.classList.toggle('active', mode === 'deck');
  modeWorkshopBtn.classList.toggle('active', mode === 'workshop');
}

function openModal(title, text) {
  modalTitle.textContent = title;
  modalBody.textContent = text;
  modalBackdrop.style.display = 'flex';
  modalBackdrop.setAttribute('aria-hidden', 'false');
}

function closeModal() {
  modalBackdrop.style.display = 'none';
  modalBackdrop.setAttribute('aria-hidden', 'true');
}

modalClose.addEventListener('click', closeModal);
modalBackdrop.addEventListener('click', (e) => {
  if (e.target === modalBackdrop) closeModal();
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeModal();
});

function copyText(text) {
  if (!navigator.clipboard) {
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    return;
  }
  navigator.clipboard.writeText(text);
}

function card(title, desc, prompt, tip) {
  return `
    <section class="card">
      <div class="row">
        <div>
          <h2>${title}</h2>
          <p>${desc}</p>
        </div>
        <button class="pill" data-copy>Copiar</button>
      </div>
      <pre>${prompt.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</pre>
      ${tip ? `<div class="note">${tip.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>` : ''}
    </section>
  `;
}

// =====================
// Render
// =====================
function renderDeck(i) {
  clearError();
  current = i;
  const item = data[i];

  const isSlop = item.l === 'S';
  const leftLabel = isSlop ? 'Ejemplo de slop' : (item.btn1Label || 'Ver');
  const rightLabel = isSlop ? 'Ejemplo con valor' : (item.btn2Label || 'Ver');

  content.innerHTML = `
    <div class="slide">
      <div class="letter">${item.l}</div>
      <div class="title">${item.t}</div>
      <div class="quote">${item.q}</div>

      <div style="margin-top:1.6rem; display:flex; justify-content:center; gap:.8rem; flex-wrap:wrap;">
        <button id="btnLeft" class="danger">${leftLabel}</button>
        <button id="btnRight" class="success">${rightLabel}</button>
      </div>

      <div class="hint">Flechas ← → para navegar · ${i+1}/${data.length}</div>
    </div>
  `;

  [...nav.children].forEach((b, idx) => b.classList.toggle('active', idx === i));

  if (isSlop) {
    const badTitle = item.badTitle || 'S · Slop';
    const goodTitle = item.goodTitle || 'S · Valor';
    document.getElementById('btnLeft').addEventListener('click', () => openModal(badTitle, item.bad));
    document.getElementById('btnRight').addEventListener('click', () => openModal(goodTitle, item.good));
    return;
  }

  const t1 = item.btn1Title || `${item.l} · Nota 1`;
  const t2 = item.btn2Title || `${item.l} · Nota 2`;
  const b1 = item.btn1 || '';
  const b2 = item.btn2 || '';

  document.getElementById('btnLeft').addEventListener('click', () => openModal(t1, b1));
  document.getElementById('btnRight').addEventListener('click', () => openModal(t2, b2));
}

function renderWorkshop() {
  clearError();

  const p1 = `Quiero que actúes como DISEÑADOR DE DIAPOSITIVAS para un taller de ELE.\nTema: “La ciudad como aula: Granada en B1”.\nObjetivo: crear 8 diapositivas (título + bullets) para una clase de 60 minutos.\nCondiciones:\n- Una idea por diapositiva.\n- Cada slide incluye: (a) objetivo comunicativo, (b) 2-3 frases modelo, (c) una micro-tarea oral.\n- Evita actividades “de libro”. Todo debe sonar a calle, a vida real.\n- Registro: español peninsular, con guiños a Granada sin folclorismo.\nSalida:\n1) Índice de las 8 diapositivas.\n2) Contenido de cada diapositiva.\n3) Al final, una diapositiva de evaluación (rúbrica simple: fluidez, adecuación, interacción).`;

  const p2 = `Actúa como CLÍNICA DOCENTE (ELE) y ayúdame a PERSONALIZAR un mini-curso para un grupo real.\nDatos del grupo:\n- Nivel: B1\n- Duración: 4 semanas (8 sesiones)\n- Perfil: estudiantes universitarios internacionales, muy heterogéneos\n- Necesidad real: moverse por Granada, vivienda, trámites, vida social, universidad\nTarea:\n- Diseña una secuencia de 8 sesiones con: tema, objetivo, producto final, tareas en clase, tarea fuera.\n- Incluye variantes: opción A (grupo más fuerte) / opción B (grupo más débil).\n- Incluye 3 “momentos culturales” que generen conversación crítica.\n- No generes fichas: genera ESTRUCTURA y decisiones pedagógicas.\nFormato: tabla clara.`;

  const p3 = `Vamos a hacer “cirugía de prompt”.\nPrompt malo (genérico):\n“Créame actividades para practicar el pretérito perfecto en nivel B1”.\n\nTu tarea:\n1) Explica por qué es malo en 4 líneas.\n2) Reescríbelo en una versión EXCELENTE, con: contexto (Granada), objetivo comunicativo, restricciones (tiempo, nº de actividades), producto final.\n3) Propón 2 criterios para evaluar si lo que salga es bueno o es “relleno”.`;

  const p4 = `Checklist de uso responsable (docentes ELE).\nDame 10 preguntas cortas que debería hacerme antes de usar IA en un material o en una tarea.\nCondiciones:\n- Deben tocar: sesgo, privacidad, plagio, nivel, finalidad, evaluación, accesibilidad.\n- Tono: directo, sin moralina.\nFormato: lista numerada.`;

  content.innerHTML = `
    <div class="workshop">
      <div style="margin-bottom:1.2rem;">
        <h1 style="margin:.2rem 0 .4rem; font-size:1.6rem;">Modo Taller</h1>
        <p style="margin:0; color:var(--muted); line-height:1.5;">Cuatro micro-prácticas. La idea no es “generar cosas”, sino diseñar decisiones: estructura, personalización y criterio.</p>
      </div>

      <div class="grid">
        ${card('1) Diapositivas “con intención” (ideal para Z.ai)', 'Si alguien quiere probar una IA de presentaciones, esta plantilla fuerza objetivo, lengua y tarea (no decoración).', p1, 'Dinámica: 2 min generar · 2 min limpiar (quitar relleno) · 2 min mejorar 2 diapositivas en grupo.')}
        ${card('2) Personalizar un mini-curso en 10 minutos', 'Tu salto: de actividades sueltas a un sistema de curso real para un grupo concreto.', p2, 'Dinámica: cada asistente cambia UNA variable (perfil, duración u objetivo) y observa la reconfiguración.')}
        ${card('3) Clínica de prompt (debugging docente)', 'Aprender a detectar vaguedad, objetivos falsos y ejercicios sin vida.', p3, 'Dinámica: el grupo añade restricciones reales. La IA pasa a ser asistente, no autora.')}
        ${card('4) Checklist rápido (ética y sentido)', 'Cierre práctico: 10 preguntas para no usar IA como atajo ciego.', p4, 'Dinámica: elegir 3 preguntas “obligatorias” para el equipo y convertirlas en acuerdo.')}
      </div>

      <div style="margin-top:1.2rem; color:var(--muted); font-size:.9rem;">Consejo: si alguien no tiene Z.ai, puede ejecutar lo mismo con cualquier IA.</div>
    </div>
  `;

  const buttons = content.querySelectorAll('button[data-copy]');
  const prompts = [p1, p2, p3, p4];
  buttons.forEach((btn, idx) => {
    btn.addEventListener('click', () => {
      copyText(prompts[idx]);
      btn.textContent = 'Copiado ✓';
      setTimeout(() => (btn.textContent = 'Copiar'), 900);
    });
  });

  [...nav.children].forEach((b) => b.classList.remove('active'));
}

function setMode(next) {
  mode = next;
  setActiveModeButtons();
  if (mode === 'deck') renderDeck(current);
  else renderWorkshop();
}

// =====================
// Init
// =====================
function buildNav() {
  nav.innerHTML = '';
  data.forEach((item, i) => {
    const btn = document.createElement('button');
    btn.textContent = item.l;
    btn.addEventListener('click', () => {
      setMode('deck');
      renderDeck(i);
    });
    nav.appendChild(btn);
  });
}

modeDeckBtn.addEventListener('click', () => setMode('deck'));
modeWorkshopBtn.addEventListener('click', () => setMode('workshop'));

document.addEventListener('keydown', (e) => {
  if (mode !== 'deck') return;
  if (e.key === 'ArrowRight' && current < data.length - 1) renderDeck(current + 1);
  if (e.key === 'ArrowLeft' && current > 0) renderDeck(current - 1);
});

// =====================
// Self-tests (muy ligeros)
// =====================
function runSelfTests() {
  // 1) Estructura A–Z
  const letters = data.map(d => d.l).join('');
  if (data.length !== 26) throw new Error(`Se esperaban 26 entradas (A–Z) y hay ${data.length}.`);
  if (letters !== 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') throw new Error('Las letras no están completas o no están en orden A–Z.');

  // 2) DOM mínimo
  if (!nav || !content || !modeDeckBtn || !modeWorkshopBtn) throw new Error('Faltan elementos clave del DOM.');

  // 2b) Portada
  if (!cover || !enterBtn) throw new Error('Falta la portada (cover) o el botón de entrada (enterBtn).');

  // 3) Propiedades básicas presentes
  const missingProps = data.filter(d => !d.l || !d.t || !d.q).map(d => d.l || '?');
  if (missingProps.length) throw new Error('Faltan propiedades (l/t/q) en: ' + missingProps.join(', '));

  // 4) S debe conservar slop/valor
  const s = data.find(d => d.l === 'S');
  if (!s) throw new Error('No existe la entrada S.');
  if (!s.bad || !s.good) throw new Error('S debe tener bad/good (slop/valor).');

  // 5) El resto debe tener 2 focos (btn1/btn2)
  const others = data.filter(d => d.l !== 'S');
  const missBtn1 = others.filter(d => !d.btn1 || !d.btn1Title || !d.btn1Label).map(d => d.l);
  if (missBtn1.length) throw new Error('Falta btn1 (label/title/text) en: ' + missBtn1.join(', '));
  const missBtn2 = others.filter(d => !d.btn2 || !d.btn2Title || !d.btn2Label).map(d => d.l);
  if (missBtn2.length) throw new Error('Falta btn2 (label/title/text) en: ' + missBtn2.join(', '));
}

function hideCover() {
  cover.style.display = 'none';
}

try {
  runSelfTests();
  buildNav();
  setMode('deck');

  // Portada
  enterBtn.addEventListener('click', hideCover);
  document.addEventListener('keydown', (e) => {
    if (cover.style.display !== 'none' && (e.key === 'Enter' || e.key === ' ')) {
      hideCover();
    }
  });
} catch (err) {
  console.error(err);
  showError(`Error de inicialización: ${err.message}`);
}
</script>

</body>
</html>
